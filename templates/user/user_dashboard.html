{% extends "base_user.html" %}

{% block title %}User Dashboard - Quiz Master{% endblock %}
{% block navbar_user %}
{% include "navbar_user.html" %}
{% endblock %}
{% block content %}


    <section class="mb-6">
        <div class="row gap-6">
            <div class="col">
                <div class="card">
                    <div class="card-body">
                        <h3 class="mb-3">Your Details</h3>
                        <div class="detail-item">
                            <span class="detail-key">Username:</span>
                            <span class="detail-value">{{ current_user.username }}</span>
                        </div>
    
                        <div class="detail-item">
                            <span class="detail-key">Full Name:</span>
                            <span class="detail-value">{{ current_user.fullname }}</span>
                        </div>
    
                        <div class="detail-item">
                            <span class="detail-key">Qualification:</span>
                            <span class="detail-value">{{ current_user.qualification }}</span>
                        </div>
    
                        <div class="detail-item">
                            <span class="detail-key">DOB:</span>
                            <span class="detail-value">{{ current_user.dob.strftime("%d-%m-%Y") }}</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card">
                    <div class="card-body">
                        <h3 class="mb-3">Progress Summary</h3>
                        <div class="detail-item">
                            <span class="detail-key">Total Attempted Quizzes:</span>
                            <span class="detail-value">{{ total_attempts }}</span>
                        </div>
    
                        <div class="detail-item">
                            <span class="detail-key">Average Score:</span>
                            <span class="detail-value">{{ average_score|round(2) }}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <section class="mb-6">
        <div class="card">
            <div class="card-body">
                <h3 class="mb-3">Quiz History</h3>
                <div class="table-container">
                    {% if scores %}
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Quiz Name</th>
                                <th>Attempted Time</th>
                                <th>Total Score</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for score in scores %}
                            <tr>
                                <td>{{ score.quiz.quiz_title }}</td>
                                <td>{{ score.user.time_stamp.strftime("%d-%m-%Y  %I:%M %p") if score.user.time_stamp else '' }}</td>
                                <td>{{ score.total_score }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                    {% else %}
                    <p>No quiz attempts found. Please take a quiz to see your history.</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </section>
                  
    


{% endblock %}